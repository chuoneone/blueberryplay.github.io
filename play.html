<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥ç§˜ç‹—ä»”èˆ‡å¥³æ˜æ˜Ÿï¼šå°å—æ—…æ‹å¤§æŒ‘æˆ°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .task-item {
            transition: all 0.3s ease;
        }
        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .score-item {
            transition: all 0.3s ease;
        }
        .score-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="gradient-bg text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">ğŸ¬ ç¥ç§˜ç‹—ä»”èˆ‡å¥³æ˜æ˜Ÿ</h1>
            <h2 class="text-2xl md:text-3xl font-medium mb-2">ä¹‹ç½·å…éŠæˆ²é•·å¤§æŒ‘æˆ°</h2>
            <div class="bg-white bg-opacity-20 rounded-full px-6 py-2 inline-block">
                <span class="text-lg font-medium">ğŸ—“ï¸ 2025/08/16 ~ 2025/08/18</span>
            </div>
        </div>
    </div>

    <div class="bg-white shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex justify-center space-x-8">
                <button onclick="showPage('guide')" id="guideTab" class="py-4 px-6 font-medium text-blue-600 border-b-2 border-blue-600">
                    ğŸ“– éŠæˆ²æŒ‡å—
                </button>
                <button onclick="showPage('leaderboard')" id="leaderboardTab" class="py-4 px-6 font-medium text-gray-500 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition duration-300">
                    ğŸ† ç‹—ä»”æ’è¡Œæ¦œ
                </button>
                <button onclick="showScorePage()" id="scoreTab" class="py-4 px-6 font-medium text-gray-500 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition duration-300">
                    ğŸ“Š å¾Œå°ç®¡ç†
                </button>
            </div>
        </div>
    </div>

    <div id="guidePage" class="page active">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <div class="bg-white rounded-xl card-shadow p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    ğŸ¯ ä»»å‹™è¦å‰‡
                </h3>
                <p class="text-gray-700 leading-relaxed text-lg mb-4">
                    æ¯ä½ç©å®¶å°‡éš¨æ©ŸæŠ½å–ä¸€å¼µä»»å‹™å¡ï¼Œå¡ç‰‡ä¸ŠåŒ…å«ï¼š
                </p>
                <div class="space-y-2 mb-4">
                    <div class="flex items-center">
                        <span class="text-green-500 mr-2">âœ…</span>
                        <span class="text-gray-700">ä¸€ä½ã€Œå¥³æ˜æ˜Ÿã€</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-green-500 mr-2">âœ…</span>
                        <span class="text-gray-700">ä¸€å€‹ã€ŒæŒ‡å®šå‹•ä½œã€</span>
                    </div>
                </div>
                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                    <h4 class="font-semibold text-blue-800 mb-2">ä¾‹å¦‚ï¼š</h4>
                    <p class="text-blue-700 mb-2">æŠ½åˆ°ã€ŒèŠ®å„€ã€ +ã€Œæ¯”yaçš„æ¨£å­ã€</p>
                    <p class="text-blue-700">â¡ï¸ ä»»å‹™å°±æ˜¯æ‹æ”æ‰€æœ‰äººåœ¨ã€Œæ¯”yaã€çš„ç¬é–“ï¼Œæ‹åˆ°æŒ‡å®šå¥³æ˜æ˜Ÿã€ŒèŠ®å„€ã€çš„ç…§ç‰‡æœƒæ›´å¤šéŒ¢ã€‚</p>
                </div>

                <div class="mt-4">
                    <img src="example.png" alt="éŠæˆ²ç¯„ä¾‹åœ–ç‰‡" class="rounded-lg shadow-md" style="max-width: 50%;">
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    ğŸ“¸ æ‹æ”èˆ‡å¾—åˆ†è¦å‰‡
                </h3>
                <div class="space-y-4">
                    <div class="space-y-3">
                        <div class="flex items-center justify-between bg-green-50 rounded-lg p-4 border border-green-200">
                            <span class="text-green-700 font-medium">æ‹åˆ°åŸ·è¡Œè©²å‹•ä½œçš„äºº</span>
                            <span class="bg-green-500 text-white px-3 py-1 rounded-full font-bold">10,000 å…ƒ</span>
                        </div>
                        <div class="flex items-center justify-between bg-blue-50 rounded-lg p-4 border border-blue-200">
                            <span class="text-blue-700 font-medium">æŒ‡å®šçš„å¥³æ˜æ˜Ÿä¹Ÿå‡ºç¾</span>
                            <span class="bg-blue-500 text-white px-3 py-1 rounded-full font-bold">é¡å¤– +10,000 å…ƒ</span>
                        </div>
                        <div class="flex items-center justify-between bg-purple-50 rounded-lg p-4 border border-purple-200">
                            <span class="text-purple-700 font-medium">æ‹åˆ°éŠæˆ²é•·</span>
                            <span class="bg-purple-500 text-white px-3 py-1 rounded-full font-bold">é¡å¤– +5,000 å…ƒ</span>
                        </div>
                    </div>
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                        <h4 class="font-semibold text-yellow-800 mb-2">ğŸ“· æ‹æ”é™åˆ¶ï¼š</h4>
                        <p class="text-yellow-700">
                            æ¯å¼µç…§ç‰‡é™åˆ¶3äººï¼ˆçš†è¦æœ‰é›™çœ¼é¼»å­å˜´å·´ï¼‰
                        </p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    ğŸ“¤ ç…§ç‰‡æ”¶é›†èˆ‡æª¢æŸ¥å»ºè­°æµç¨‹
                </h3>
                <div class="space-y-4">
                    <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                        <h4 class="font-semibold text-blue-800 mb-2">ğŸ“¸ æäº¤è¦å‰‡ï¼š</h4>
                        <p class="text-blue-700">æ¯ä½ç‹—ä»”æœ€å¤šåªèƒ½äº¤10å¼µç…§ç‰‡</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                        <h4 class="font-semibold text-green-800 mb-2">ğŸ“ ç›¸ç°¿è¨­ç½®ï¼š</h4>
                        <p class="text-green-700">å’ŒéŠæˆ²é•·è¨­ç½®ä¸€å€‹ç›¸ç°¿</p>
                    </div>
                    <div class="bg-red-50 rounded-lg p-4 border border-red-200">
                        <h4 class="font-semibold text-red-800 mb-2">â° æˆªæ­¢æ™‚é–“ï¼š</h4>
                        <p class="text-red-700 font-bold">8/17 æ™šä¸Š 10 é»æˆªæ­¢</p>
                    </div>
                </div>
            </div>



                    <button onclick="showLotteryPage()" class="bg-gradient-to-r from-pink-500 to-rose-600 text-white font-bold py-4 px-8 rounded-lg hover:from-pink-600 hover:to-rose-700 transition duration-300 text-lg">
                        ğŸ¯ é–‹å§‹æŠ½ç±¤
                    </button>

           

            <div class="text-center mt-8 py-6">
                <div class="pulse-animation text-4xl mb-2">ğŸ†</div>
                <p class="text-gray-600 font-medium">ç¥å„ä½ç‹—ä»”å€‘æ‹æ”æ„‰å¿«ï¼Œæˆç‚ºæœ€å¼·æ”å½±å¤§å¸«ï¼</p>
            </div>
        </div>
    </div>

    <div id="leaderboardPage" class="page">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <div class="bg-white rounded-xl card-shadow p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    ğŸ† ç‹—ä»”æ’è¡Œæ¦œ
                </h3>
                <div id="mainLeaderboard" class="space-y-3">
                    <div class="text-gray-500 text-center py-8">å°šç„¡æˆç¸¾è¨˜éŒ„</div>
                </div>
            </div>
        </div>
    </div>

    <div id="scorePage" class="page">
        <div class="container mx-auto px-4 py-8 max-w-6xl">
            <div class="bg-white rounded-xl card-shadow p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    ğŸ“ æˆç¸¾ç™»éŒ„
                </h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é¸æ“‡ç‹—ä»”ï¼š</label>
                        <select id="playerSelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">è«‹é¸æ“‡ç‹—ä»”...</option>
                            <option value="å¼µè˜æ˜•">å¼µè˜æ˜•</option>
                            <option value="è¬å®›åº­">è¬å®›åº­</option>
                            <option value="æ—ç¿ è">æ—ç¿ è</option>
                            <option value="æ—æ™å„€">æ—æ™å„€</option>
                            <option value="é»ƒä½³å„€">é»ƒä½³å„€</option>
                            <option value="ææ¬£è«­">ææ¬£è«­</option>
                            <option value="é™³ç›ˆå¦™">é™³ç›ˆå¦™</option>
                            <option value="é™³å­Ÿæ¬£">é™³å­Ÿæ¬£</option>
                            <option value="é«˜éˆºé›…">é«˜éˆºé›…</option>
                            <option value="æ´ªäºèŒœ">æ´ªäºèŒœ</option>
                            <option value="æä¾‘è“">æä¾‘è“</option>
                            <option value="é™³å±æ…ˆ">é™³å±æ…ˆ</option>
                            <option value="é»ƒæ€¡èŒ¹">é»ƒæ€¡èŒ¹</option>
                            <option value="é¾é‡‡ç">é¾é‡‡ç</option>
                            <option value="æç¨ç‘©">æç¨ç‘©</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">åŸ·è¡Œè©²å‹•ä½œçš„äººæ•¸ï¼ˆæœ€å¤š3äººï¼‰ï¼š</label>
                        <select id="peopleCount" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">è«‹é¸æ“‡äººæ•¸...</option>
                            <option value="1">1äºº (10,000å…ƒ)</option>
                            <option value="2">2äºº (20,000å…ƒ)</option>
                            <option value="3">3äºº (30,000å…ƒ)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é¡å¤–åŠ åˆ†æ¢ä»¶ï¼ˆå¯å¤šé¸ï¼‰ï¼š</label>
                        <div class="space-y-3">
                            <label class="flex items-center bg-blue-50 rounded-lg p-3 border border-blue-200 cursor-pointer hover:bg-blue-100">
                                <input type="checkbox" id="bonus1" value="10000" class="mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <span class="text-blue-700 font-medium flex-1">æŒ‡å®šçš„å¥³æ˜æ˜Ÿä¹Ÿå‡ºç¾</span>
                                <span class="bg-blue-500 text-white px-2 py-1 rounded-full text-sm font-bold">+10,000å…ƒ</span>
                            </label>
                            
                            <label class="flex items-center bg-purple-50 rounded-lg p-3 border border-purple-200 cursor-pointer hover:bg-purple-100">
                                <input type="checkbox" id="bonus2" value="5000" class="mr-3 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded">
                                <span class="text-purple-700 font-medium flex-1">æ‹åˆ°éŠæˆ²é•·</span>
                                <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-sm font-bold">+5,000å…ƒ</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                        <p class="text-yellow-800 text-sm">
                            âš ï¸ æ¯å¼µç…§ç‰‡é™åˆ¶3äººï¼ˆçš†è¦æœ‰é›™çœ¼é¼»å­å˜´å·´ï¼‰
                        </p>
                    </div>
                </div>

                <div class="mt-6 flex items-center justify-between">
                    <div class="text-lg font-bold text-gray-700">
                        é è¨ˆå¾—åˆ†ï¼š<span id="previewScore" class="text-blue-600">0</span> å…ƒ
                    </div>
                    <div class="flex gap-3">
                        <button onclick="resetForm()" class="bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition duration-300">
                            æ¸…é™¤
                        </button>
                        <button onclick="submitScore()" class="bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:from-green-600 hover:to-emerald-700 transition duration-300">
                            é€å‡ºæˆç¸¾
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    â­ å…¶ä»–åŠ åˆ†é …ç›®
                </h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é¸æ“‡ç‹—ä»”ï¼š</label>
                        <select id="otherBonusPlayerSelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                            <option value="">è«‹é¸æ“‡ç‹—ä»”...</option>
                            <option value="å¼µè˜æ˜•">å¼µè˜æ˜•</option>
                            <option value="è¬å®›åº­">è¬å®›åº­</option>
                            <option value="æ—ç¿ è">æ—ç¿ è</option>
                            <option value="æ—æ™å„€">æ—æ™å„€</option>
                            <option value="é»ƒä½³å„€">é»ƒä½³å„€</option>
                            <option value="ææ¬£è«­">ææ¬£è«­</option>
                            <option value="é™³ç›ˆå¦™">é™³ç›ˆå¦™</option>
                            <option value="é™³å­Ÿæ¬£">é™³å­Ÿæ¬£</option>
                            <option value="é«˜éˆºé›…">é«˜éˆºé›…</option>
                            <option value="æ´ªäºèŒœ">æ´ªäºèŒœ</option>
                            <option value="æä¾‘è“">æä¾‘è“</option>
                            <option value="é™³å±æ…ˆ">é™³å±æ…ˆ</option>
                            <option value="é»ƒæ€¡èŒ¹">é»ƒæ€¡èŒ¹</option>
                            <option value="é¾é‡‡ç">é¾é‡‡ç</option>
                            <option value="æç¨ç‘©">æç¨ç‘©</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é¸æ“‡åŠ åˆ†é …ç›®ï¼š</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="flex items-center bg-green-50 rounded-lg p-4 border border-green-200">
                                <input type="radio" name="otherBonusAmount" id="otherBonus10000" value="10000" class="mr-3 h-4 w-4 text-green-600 focus:ring-green-500">
                                <label for="otherBonus10000" class="flex-1 cursor-pointer">
                                    <span class="bg-green-500 text-white px-3 py-2 rounded-full text-sm font-bold">+10,000å…ƒ</span>
                                </label>
                            </div>
                            
                            <div class="flex items-center bg-teal-50 rounded-lg p-4 border border-teal-200">
                                <input type="radio" name="otherBonusAmount" id="otherBonus8000" value="8000" class="mr-3 h-4 w-4 text-teal-600 focus:ring-teal-500">
                                <label for="otherBonus8000" class="flex-1 cursor-pointer">
                                    <span class="bg-teal-500 text-white px-3 py-2 rounded-full text-sm font-bold">+8,000å…ƒ</span>
                                </label>
                            </div>
                            
                            <div class="flex items-center bg-indigo-50 rounded-lg p-4 border border-indigo-200">
                                <input type="radio" name="otherBonusAmount" id="otherBonus6000" value="6000" class="mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500">
                                <label for="otherBonus6000" class="flex-1 cursor-pointer">
                                    <span class="bg-indigo-500 text-white px-3 py-2 rounded-full text-sm font-bold">+6,000å…ƒ</span>
                                </label>
                            </div>
                            
                            <div class="flex items-center bg-pink-50 rounded-lg p-4 border border-pink-200">
                                <input type="radio" name="otherBonusAmount" id="otherBonus4000" value="4000" class="mr-3 h-4 w-4 text-pink-600 focus:ring-pink-500">
                                <label for="otherBonus4000" class="flex-1 cursor-pointer">
                                    <span class="bg-pink-500 text-white px-3 py-2 rounded-full text-sm font-bold">+4,000å…ƒ</span>
                                </label>
                            </div>
                            
                            <div class="flex items-center bg-orange-50 rounded-lg p-4 border border-orange-200 md:col-span-2">
                                <input type="radio" name="otherBonusAmount" id="otherBonus2000" value="2000" class="mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="otherBonus2000" class="flex-1 cursor-pointer">
                                    <span class="bg-orange-500 text-white px-3 py-2 rounded-full text-sm font-bold">+2,000å…ƒ</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">åŠ åˆ†åŸå› ï¼š</label>
                        <input type="text" id="otherBonusReason" placeholder="è«‹è¼¸å…¥åŠ åˆ†åŸå› ..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                    </div>
                </div>

                <div class="mt-6 flex items-center justify-between">
                    <div class="text-lg font-bold text-gray-700">
                        åŠ åˆ†é‡‘é¡ï¼š<span id="otherBonusPreview" class="text-purple-600">0</span> å…ƒ
                    </div>
                    <div class="flex gap-3">
                        <button onclick="resetOtherBonusForm()" class="bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition duration-300">
                            æ¸…é™¤
                        </button>
                        <button onclick="submitOtherBonus()" class="bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition duration-300">
                            é€å‡ºåŠ åˆ†
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    ğŸ† ç‹—ä»”æ’è¡Œæ¦œ
                </h3>
                <div id="leaderboard" class="space-y-3">
                    <div class="text-gray-500 text-center py-8">å°šç„¡æˆç¸¾è¨˜éŒ„</div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                        ğŸ“‹ è©³ç´°æˆç¸¾è¨˜éŒ„
                    </h3>
                    <button onclick="resetAllScores()" class="bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300 text-sm">
                        ğŸ—‘ï¸ é‡ç½®æ‰€æœ‰æˆç¸¾
                    </button>
                </div>
                <div id="detailedRecords" class="space-y-4">
                    <div class="text-gray-500 text-center py-8">å°šç„¡è©³ç´°è¨˜éŒ„</div>
                </div>
            </div>
        </div>
    </div>

    <div id="lotteryPage" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl card-shadow p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">ğŸ² èº«ä»½æŠ½ç±¤</h3>
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">é¸æ“‡ä½ çš„åå­—ï¼š</label>
                <select id="lotteryPlayerSelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-lg">
                    <option value="">è«‹é¸æ“‡...</option>
                    <option value="å¼µè˜æ˜•">å¼µè˜æ˜•</option>
                    <option value="è¬å®›åº­">è¬å®›åº­ (16-17æ—¥åƒèˆ‡)</option>
                    <option value="æ—ç¿ è">æ—ç¿ è</option>
                    <option value="æ—æ™å„€">æ—æ™å„€ (17-18æ—¥åƒèˆ‡)</option>
                    <option value="é»ƒä½³å„€">é»ƒä½³å„€</option>
                    <option value="ææ¬£è«­">ææ¬£è«­</option>
                    <option value="é™³ç›ˆå¦™">é™³ç›ˆå¦™</option>
                    <option value="é™³å­Ÿæ¬£">é™³å­Ÿæ¬£</option>
                    <option value="é«˜éˆºé›…">é«˜éˆºé›…</option>
                    <option value="æ´ªäºèŒœ">æ´ªäºèŒœ</option>
                    <option value="æä¾‘è“">æä¾‘è“</option>
                    <option value="é™³å±æ…ˆ">é™³å±æ…ˆ</option>
                    <option value="é»ƒæ€¡èŒ¹">é»ƒæ€¡èŒ¹</option>
                    <option value="é¾é‡‡ç">é¾é‡‡ç</option>
                    <option value="æç¨ç‘©">æç¨ç‘©</option>
                </select>
            </div>

            <div class="flex gap-3">
                <button onclick="drawLottery()" class="flex-1 bg-gradient-to-r from-pink-500 to-rose-600 text-white font-bold py-3 px-6 rounded-lg hover:from-pink-600 hover:to-rose-700 transition duration-300">
                    ğŸ¯ é–‹å§‹æŠ½ç±¤
                </button>
                <button onclick="hideLotteryPage()" class="flex-1 bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition duration-300">
                    å–æ¶ˆ
                </button>
            </div>
        </div>
    </div>

    <div id="lotteryResult" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl card-shadow p-8 max-w-md w-full mx-4 text-center">
            <h3 class="text-2xl font-bold text-gray-800 mb-4">ğŸ‰ æŠ½ç±¤çµæœ</h3>
            <div class="bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg p-6 mb-6 border border-pink-200">
                <p class="text-gray-700 mb-2">ç‹—ä»”ï¼š<span id="playerName" class="font-bold text-pink-600"></span></p>
                <p class="text-gray-700">ä½ çš„å¥³æ˜æ˜Ÿï¼š<span id="targetName" class="font-bold text-rose-600 text-2xl"></span></p>
                <p class="text-gray-700 mt-2">æŒ‡å®šå‹•ä½œï¼š<span id="actionName" class="font-bold text-purple-600 text-2xl"></span></p>
            </div>
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                <p class="text-yellow-800 text-sm">âš ï¸ è«‹å‹™å¿…ä¿å¯†ä½ çš„å¥³æ˜æ˜Ÿèº«ä»½ï¼</p>
            </div>
            <button onclick="hideLotteryResult()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-600 hover:to-purple-700 transition duration-300">
                ç¢ºèª
            </button>
        </div>
    </div>

    <div id="scorePasswordPrompt" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl card-shadow p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">ğŸ”’ å¾Œå°ç®¡ç†é©—è­‰</h3>
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">è«‹è¼¸å…¥å¯†ç¢¼ï¼š</label>
                <input type="password" id="scorePasswordInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-lg" placeholder="è¼¸å…¥å¯†ç¢¼">
            </div>

            <div class="flex gap-3">
                <button onclick="checkScorePassword()" class="flex-1 bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition duration-300">
                    ç¢ºèª
                </button>
                <button onclick="hideScorePasswordPrompt()" class="flex-1 bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition duration-300">
                    å–æ¶ˆ
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        const API_URL = 'https://script.google.com/macros/s/AKfycbwzaalwM3xfioMfUU4SXINaXGR2Kv_TyKE2stsQKFfptvTG1HfaEp5DYvfpKg_fBkmMsA/exec';
        let scores = {};
        let records = [];
        let players = ['å¼µè˜æ˜•', 'è¬å®›åº­', 'æ—ç¿ è', 'æ—æ™å„€', 'é»ƒä½³å„€', 'ææ¬£è«­', 'é™³ç›ˆå¦™', 'é™³å­Ÿæ¬£', 'é«˜éˆºé›…', 'æ´ªäºèŒœ', 'æä¾‘è“', 'é™³å±æ…ˆ', 'é»ƒæ€¡èŒ¹', 'é¾é‡‡ç', 'æç¨ç‘©'];
        let availableTargets = [...players];
        let actions = ['é£²é£Ÿ', 'ä½¿ç”¨æ°‘å®¿è¨­æ–½ï¼ˆä¸åŒ…å«ç©éŠæˆ²è¨­æ–½ï¼‰', 'ç©éŠæˆ²', 'ç¬‘çš„æ¨£å­', 'ä¸ç¬‘çš„æ¨£å­'];
        let lotteryResults = [];

        // Page navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId + 'Page').classList.add('active');
            
            document.querySelectorAll('button[id$="Tab"]').forEach(tab => {
                tab.className = 'py-4 px-6 font-medium text-gray-500 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition duration-300';
            });
            document.getElementById(pageId + 'Tab').className = 'py-4 px-6 font-medium text-blue-600 border-b-2 border-blue-600';

            // Load data when a relevant page is shown
            if (pageId === 'leaderboard' || pageId === 'score') {
                loadData();
            }
        }

        function showScorePage() {
            document.getElementById('scorePasswordPrompt').classList.remove('hidden');
        }

        function hideScorePasswordPrompt() {
            document.getElementById('scorePasswordPrompt').classList.add('hidden');
            document.getElementById('scorePasswordInput').value = '';
        }

        function checkScorePassword() {
            const password = document.getElementById('scorePasswordInput').value;
            if (password === '8787') {
                document.getElementById('scorePasswordPrompt').classList.add('hidden');
                showPage('score');
            } else {
                alert('å¯†ç¢¼éŒ¯èª¤ï¼');
                document.getElementById('scorePasswordInput').value = '';
            }
        }

        // Lottery functions
        function showLotteryPage() {
            document.getElementById('lotteryPage').classList.remove('hidden');
        }

        function hideLotteryPage() {
            document.getElementById('lotteryPage').classList.add('hidden');
        }

        function hideLotteryResult() {
            document.getElementById('lotteryResult').classList.add('hidden');
            document.getElementById('lotteryPage').classList.add('hidden');
        }

        function drawLottery() {
            const selectedPlayer = document.getElementById('lotteryPlayerSelect').value;
            
            if (!selectedPlayer) {
                alert('è«‹å…ˆé¸æ“‡ä½ çš„åå­—ï¼');
                return;
            }

            if (lotteryResults.find(result => result.player === selectedPlayer)) {
                alert('ä½ å·²ç¶“æŠ½éç±¤äº†ï¼');
                return;
            }

            const playerIndex = availableTargets.indexOf(selectedPlayer);
            if (playerIndex > -1) {
                availableTargets.splice(playerIndex, 1);
            }

            if (availableTargets.length === 0) {
                alert('æ‰€æœ‰äººéƒ½å·²ç¶“è¢«æŠ½å®Œäº†ï¼');
                return;
            }

            const randomTargetIndex = Math.floor(Math.random() * availableTargets.length);
            const selectedTarget = availableTargets[randomTargetIndex];
            
            const randomActionIndex = Math.floor(Math.random() * actions.length);
            const selectedAction = actions[randomActionIndex];
            
            availableTargets.splice(randomTargetIndex, 1);

            lotteryResults.push({
                player: selectedPlayer,
                target: selectedTarget,
                action: selectedAction
            });

            document.getElementById('playerName').textContent = selectedPlayer;
            document.getElementById('targetName').textContent = selectedTarget;
            document.getElementById('actionName').textContent = selectedAction;
            document.getElementById('lotteryResult').classList.remove('hidden');
        }

        // Score system functions
        document.addEventListener('DOMContentLoaded', function() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updatePreviewScore);
            });

            const peopleCountSelect = document.getElementById('peopleCount');
            peopleCountSelect.addEventListener('change', updatePreviewScore);

            const otherBonusRadios = document.querySelectorAll('input[name="otherBonusAmount"]');
            otherBonusRadios.forEach(radio => {
                radio.addEventListener('change', updateOtherBonusPreview);
            });

            document.getElementById('scorePasswordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkScorePassword();
            });
            
            loadData();
        });

        async function loadData() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();
                
                scores = data.scores || {};
                records = data.records || [];
                
                updateLeaderboard();
                updateMainLeaderboard();
                updateDetailedRecords();
            } catch (error) {
                console.error('Error loading data from Google Sheets:', error);
            }
        }

        function updatePreviewScore() {
            let total = 0;
            const peopleCount = document.getElementById('peopleCount').value;
            if (peopleCount) {
                total += parseInt(peopleCount) * 10000;
            }
            
            const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            checkboxes.forEach(checkbox => {
                total += parseFloat(checkbox.value);
            });
            
            document.getElementById('previewScore').textContent = total.toLocaleString();
        }

        async function submitScore() {
            const player = document.getElementById('playerSelect').value;
            const peopleCount = document.getElementById('peopleCount').value;
            
            if (!player) {
                alert('è«‹é¸æ“‡ç‹—ä»”ï¼');
                return;
            }
            
            if (!peopleCount) {
                alert('è«‹é¸æ“‡åŸ·è¡Œå‹•ä½œçš„äººæ•¸ï¼');
                return;
            }

            let totalScore = parseInt(peopleCount) * 10000;
            let bonuses = [];
            
            bonuses.push({
                label: `${peopleCount}äººåŸ·è¡Œå‹•ä½œ`,
                score: parseInt(peopleCount) * 10000
            });
            
            const fixedCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            fixedCheckboxes.forEach(checkbox => {
                const bonus = parseFloat(checkbox.value);
                totalScore += bonus;
                const label = checkbox.parentElement.querySelector('span').textContent;
                bonuses.push({ label: label, score: bonus });
            });
            
            try {
                await fetch(API_URL, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: 'submitScore',
                        player: player,
                        peopleCount: peopleCount,
                        bonuses: bonuses,
                        totalScore: totalScore
                    })
                });
                
                alert(`æˆç¸¾å·²ç™»éŒ„ï¼${player} ç²å¾— ${totalScore.toLocaleString()} å…ƒ`);
                await loadData();
                resetForm();
                
            } catch (error) {
                console.error('Error submitting score:', error);
                alert('æäº¤æˆç¸¾å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚');
            }
        }

        function updateOtherBonusPreview() {
            const selectedRadio = document.querySelector('input[name="otherBonusAmount"]:checked');
            const preview = document.getElementById('otherBonusPreview');
            
            if (selectedRadio) {
                preview.textContent = parseInt(selectedRadio.value).toLocaleString();
            } else {
                preview.textContent = '0';
            }
        }

// ä¿®æ”¹å¾Œçš„ submitScore å‡½å¼
async function submitScore() {
    const player = document.getElementById('playerSelect').value;
    const peopleCount = document.getElementById('peopleCount').value;
    
    if (!player) {
        alert('è«‹é¸æ“‡ç‹—ä»”ï¼');
        return;
    }
    
    if (!peopleCount) {
        alert('è«‹é¸æ“‡åŸ·è¡Œå‹•ä½œçš„äººæ•¸ï¼');
        return;
    }

    let totalScore = parseInt(peopleCount) * 10000;
    let bonuses = [];
    
    bonuses.push({
        label: `${peopleCount}äººåŸ·è¡Œå‹•ä½œ`,
        score: parseInt(peopleCount) * 10000
    });
    
    const fixedCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
    fixedCheckboxes.forEach(checkbox => {
        const bonus = parseFloat(checkbox.value);
        totalScore += bonus;
        const label = checkbox.parentElement.querySelector('span').textContent;
        bonuses.push({ label: label, score: bonus });
    });
    
    try {
        const response = await fetch(API_URL, {
            method: 'POST',
            body: JSON.stringify({
                action: 'submitScore',
                player: player,
                peopleCount: peopleCount,
                bonuses: bonuses,
                totalScore: totalScore
            })
        });
        
        // æª¢æŸ¥å›æ‡‰æ˜¯å¦æˆåŠŸï¼Œä½†ä¸å¼·åˆ¶è§£æç‚ºJSON
        if (response.ok) {
             alert(`æˆç¸¾å·²ç™»éŒ„ï¼${player} ç²å¾— ${totalScore.toLocaleString()} å…ƒ`);
             await loadData();
             resetForm();
        } else {
             throw new Error(`ä¼ºæœå™¨å›æ‡‰éŒ¯èª¤: ${response.status}`);
        }
    } catch (error) {
        console.error('Error submitting score:', error);
        alert('æäº¤æˆç¸¾å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚');
    }
}

// ä¿®æ”¹å¾Œçš„ submitOtherBonus å‡½å¼
async function submitOtherBonus() {
    const player = document.getElementById('otherBonusPlayerSelect').value;
    const selectedRadio = document.querySelector('input[name="otherBonusAmount"]:checked');
    const reason = document.getElementById('otherBonusReason').value.trim();
    
    if (!player) {
        alert('è«‹é¸æ“‡ç‹—ä»”ï¼');
        return;
    }
    
    if (!selectedRadio) {
        alert('è«‹é¸æ“‡åŠ åˆ†é …ç›®ï¼');
        return;
    }

    if (!reason) {
        alert('è«‹è¼¸å…¥åŠ åˆ†åŸå› ï¼');
        return;
    }

    const bonusAmount = parseInt(selectedRadio.value);
    const finalLabel = reason;
    
    try {
        const response = await fetch(API_URL, {
            method: 'POST',
            body: JSON.stringify({
                action: 'submitOtherBonus',
                player: player,
                bonuses: [{ label: finalLabel, score: bonusAmount }],
                totalScore: bonusAmount,
                isOtherBonus: true
            })
        });

        // æª¢æŸ¥å›æ‡‰æ˜¯å¦æˆåŠŸï¼Œä½†ä¸å¼·åˆ¶è§£æç‚ºJSON
        if (response.ok) {
            alert(`åŠ åˆ†å·²ç™»éŒ„ï¼${player} ç²å¾— ${bonusAmount.toLocaleString()} å…ƒ`);
            await loadData();
            resetOtherBonusForm();
        } else {
            throw new Error(`ä¼ºæœå™¨å›æ‡‰éŒ¯èª¤: ${response.status}`);
        }
    } catch (error) {
        console.error('Error submitting other bonus:', error);
        alert('æäº¤åŠ åˆ†å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚');
    }
}

// ä¿®æ”¹å¾Œçš„ deleteRecord å‡½å¼
async function deleteRecord(recordId) {
    if (!confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†è¨˜éŒ„å—ï¼Ÿ')) return;
    
    try {
        const response = await fetch(API_URL, {
            method: 'POST',
            body: JSON.stringify({
                action: 'deleteRecord',
                id: recordId
            })
        });

        if (response.ok) {
            alert('è¨˜éŒ„å·²åˆªé™¤ï¼');
            await loadData();
        } else {
            throw new Error(`ä¼ºæœå™¨å›æ‡‰éŒ¯èª¤: ${response.status}`);
        }
    } catch (error) {
        console.error('Error deleting record:', error);
        alert('åˆªé™¤è¨˜éŒ„å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚');
    }
}

// ä¿®æ”¹å¾Œçš„ resetAllScores å‡½å¼
async function resetAllScores() {
    if (!confirm('ç¢ºå®šè¦é‡ç½®æ‰€æœ‰æˆç¸¾å—ï¼Ÿé€™å€‹å‹•ä½œç„¡æ³•å¾©åŸï¼')) return;
    
    try {
        const response = await fetch(API_URL, {
            method: 'POST',
            body: JSON.stringify({
                action: 'resetAllScores'
            })
        });
        
        if (response.ok) {
            alert('æ‰€æœ‰æˆç¸¾å·²é‡ç½®ï¼');
            await loadData();
            resetForm();
            resetOtherBonusForm();
        } else {
            throw new Error(`ä¼ºæœå™¨å›æ‡‰éŒ¯èª¤: ${response.status}`);
        }
    } catch (error) {
        console.error('Error resetting scores:', error);
        alert('é‡ç½®æˆç¸¾å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚');
    }
}

        function updateLeaderboard() {
            const leaderboard = document.getElementById('leaderboard');
            updateLeaderboardContent(leaderboard);
        }

        function updateMainLeaderboard() {
            const mainLeaderboard = document.getElementById('mainLeaderboard');
            updateLeaderboardContent(mainLeaderboard);
        }

        function updateLeaderboardContent(container) {
            if (Object.keys(scores).length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-8">å°šç„¡æˆç¸¾è¨˜éŒ„</div>';
                return;
            }

            const sortedPlayers = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            
            container.innerHTML = '';
            sortedPlayers.forEach((entry, index) => {
                const [player, score] = entry;
                const rank = index + 1;
                let rankColor = 'bg-gray-100';
                let rankIcon = 'ğŸ…';
                
                if (rank === 1) {
                    rankColor = 'bg-gradient-to-r from-yellow-100 to-amber-100 border-yellow-300';
                    rankIcon = 'ğŸ¥‡';
                } else if (rank === 2) {
                    rankColor = 'bg-gradient-to-r from-gray-100 to-slate-100 border-gray-300';
                    rankIcon = 'ğŸ¥ˆ';
                } else if (rank === 3) {
                    rankColor = 'bg-gradient-to-r from-orange-100 to-amber-100 border-orange-300';
                    rankIcon = 'ğŸ¥‰';
                }

                const photosCount = records.filter(r => r.player === player && !r.isOtherBonus).length;
                const div = document.createElement('div');
                div.className = `score-item ${rankColor} rounded-lg p-4 border-2`;
                div.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">${rankIcon}</span>
                            <div>
                                <span class="font-bold text-lg text-gray-800">${rank}. ${player}</span>
                                <div class="text-sm text-gray-600">${photosCount} å¼µç…§ç‰‡</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-blue-600">${score.toLocaleString()}</div>
                            <div class="text-sm text-gray-500">ç¸½çé‡‘</div>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateDetailedRecords() {
            const detailedRecords = document.getElementById('detailedRecords');
            
            if (records.length === 0) {
                detailedRecords.innerHTML = '<div class="text-gray-500 text-center py-8">å°šç„¡è©³ç´°è¨˜éŒ„</div>';
                return;
            }

            detailedRecords.innerHTML = '';
            
            const groupedRecords = {};
            records.forEach(record => {
                if (!groupedRecords[record.player]) {
                    groupedRecords[record.player] = [];
                }
                groupedRecords[record.player].push(record);
            });
            
            // Sort players alphabetically for consistent display
            Object.keys(groupedRecords).sort().forEach(player => {
                const playerRecords = groupedRecords[player];
                const playerDiv = document.createElement('div');
                playerDiv.className = 'bg-gray-50 rounded-lg p-4 border border-gray-200';
                
                let recordsHtml = '';
                playerRecords.sort((a, b) => b.id - a.id).forEach(record => {
                    let bonusHtml = '';
                    if (record.bonuses.length > 0) {
                        bonusHtml = record.bonuses.map(bonus =>
                            `<span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1">${bonus.label} (+${bonus.score.toLocaleString()}å…ƒ)</span>`
                        ).join('');
                    }
                    
                    const recordType = record.isOtherBonus ? 'å…¶ä»–åŠ åˆ†' : `ç…§ç‰‡`;
                    
                    recordsHtml += `
                        <div class="bg-white rounded-lg p-3 border border-gray-200 mb-2">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-medium text-gray-800">${recordType}</span>
                                <div class="flex items-center gap-2">
                                    <span class="font-bold text-green-600">${record.totalScore.toLocaleString()}å…ƒ</span>
                                    <button onclick="deleteRecord(${record.id})" class="text-red-500 hover:text-red-700 text-sm">ğŸ—‘ï¸</button>
                                </div>
                            </div>
                            ${bonusHtml ? `<div class="mb-2">${bonusHtml}</div>` : ''}
                            <div class="text-xs text-gray-500">${record.timestamp}</div>
                        </div>
                    `;
                });
                
                playerDiv.innerHTML = `
                    <h4 class="font-bold text-lg text-gray-800 mb-3">${player} (ç¸½çé‡‘: ${scores[player] ? scores[player].toLocaleString() : 0}å…ƒ)</h4>
                    ${recordsHtml}
                `;
                
                detailedRecords.appendChild(playerDiv);
            });
        }

        function resetForm() {
            document.getElementById('playerSelect').value = '';
            document.getElementById('peopleCount').value = '';
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.getElementById('previewScore').textContent = '0';
        }

        function resetOtherBonusForm() {
            document.getElementById('otherBonusPlayerSelect').value = '';
            document.querySelectorAll('input[name="otherBonusAmount"]').forEach(radio => radio.checked = false);
            document.getElementById('otherBonusReason').value = '';
            document.getElementById('otherBonusPreview').textContent = '0';
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96bd110a96ec809d',t:'MTc1NDYzNTY5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>